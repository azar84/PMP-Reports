generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model SiteSettings {
  id                       Int      @id @default(autoincrement())
  logoUrl                  String?
  logoLightUrl             String?
  logoDarkUrl              String?
  faviconUrl               String?
  faviconLightUrl          String?
  faviconDarkUrl           String?
  smtpEnabled              Boolean  @default(false)
  smtpHost                 String?
  smtpPort                 Int?     @default(587)
  smtpSecure               Boolean  @default(true)
  smtpUsername             String?
  smtpPassword             String?
  smtpFromEmail            String?
  smtpFromName             String?
  smtpReplyTo              String?
  emailSignature           String?
  emailFooterText          String?
  emailBrandingEnabled     Boolean  @default(true)
  adminNotificationEmail   String?
  emailLoggingEnabled      Boolean  @default(true)
  emailRateLimitPerHour    Int?     @default(100)
  companyPhone             String?
  companyEmail             String?
  companyAddress           String?
  socialFacebook           String?
  socialTwitter            String?
  socialLinkedin           String?
  socialInstagram          String?
  socialYoutube            String?
  footerNewsletterFormId   Int?
  footerCopyrightMessage   String?
  footerMenuIds            String?
  footerShowContactInfo    Boolean  @default(true)
  footerShowSocialLinks    Boolean  @default(true)
  footerCompanyName        String?
  footerCompanyDescription String?
  footerBackgroundColor    String?  @default("#F9FAFB")
  footerTextColor          String?  @default("#374151")
  baseUrl                  String?  @default("")
  createdAt                DateTime @default(now())
  updatedAt                DateTime @updatedAt
  gaMeasurementId          String?  @default("NULL")
  gtmContainerId           String?  @default("NULL")
  gtmEnabled               Boolean  @default(false)
  cloudinaryApiKey         String?
  cloudinaryApiSecret      String?
  cloudinaryCloudName      String?
  cloudinaryEnabled        Boolean  @default(false)
  cloudinaryUploadPreset   String?
  sidebarBackgroundColor   String?  @default("#1F2937")
  sidebarHoverColor        String?  @default("#D1D5DB")
  sidebarSelectedColor     String?  @default("#FFFFFF")
  sidebarTextColor         String?  @default("#E5E7EB")
  currencySymbol           String?  @default("$")

  @@map("site_settings")
}

model ServiceAccountCredentials {
  id                      Int      @id @default(autoincrement())
  projectId               String
  clientEmail             String
  privateKey              String
  privateKeyId            String
  clientId                String
  authUri                 String
  tokenUri                String
  authProviderX509CertUrl String
  clientX509CertUrl       String
  universeDomain          String
  isActive                Boolean  @default(true)
  createdAt               DateTime @default(now())
  updatedAt               DateTime @default(now()) @updatedAt

  @@map("service_account_credentials")
}

model SitemapSubmissionLog {
  id             String   @id @default(cuid())
  sitemapUrl     String
  siteUrl        String
  submittedAt    DateTime @default(now())
  status         String
  searchEngine   String
  googleResponse String?
  errorMessage   String?
  statusCode     Int?
  submissionId   String?
  warnings       String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @default(now()) @updatedAt

  @@map("sitemap_submission_logs")
}

model DesignSystem {
  id                           Int      @id @default(autoincrement())
  primaryColor                 String   @default("#5243E9")
  primaryColorLight            String   @default("#6366F1")
  primaryColorDark             String   @default("#4338CA")
  secondaryColor               String   @default("#7C3AED")
  accentColor                  String   @default("#06B6D4")
  successColor                 String   @default("#10B981")
  warningColor                 String   @default("#F59E0B")
  errorColor                   String   @default("#EF4444")
  infoColor                    String   @default("#3B82F6")
  borderLight                  String   @default("#F9FAFB")
  borderStrong                 String   @default("#374151")
  backgroundPrimary            String   @default("#FFFFFF")
  backgroundSecondary          String   @default("#F6F8FC")
  backgroundDark               String   @default("#0F1A2A")
  headerBackgroundColor        String   @default("#F6F8FC")
  sidebarHeaderBackgroundColor String   @default("#F6F8FC")
  sidebarBackgroundColor       String   @default("#0F1A2A")
  textPrimary                  String   @default("#4B5563")
  textSecondary                String   @default("#9CA3AF")
  textMuted                    String   @default("#D1D5DB")
  headerTextColor              String   @default("#4B5563")
  sidebarTextColor             String   @default("#4B5563")
  sidebarHeaderColor           String   @default("#4B5563")
  fontFamily                   String   @default("Manrope")
  fontFamilyMono               String   @default("ui-monospace")
  fontSizeBase                 String   @default("16px")
  lineHeightBase               String   @default("1.5")
  fontWeightNormal             String   @default("400")
  fontWeightMedium             String   @default("500")
  fontWeightBold               String   @default("700")
  spacingXs                    String   @default("4px")
  spacingSm                    String   @default("8px")
  spacingMd                    String   @default("16px")
  spacingLg                    String   @default("24px")
  spacingXl                    String   @default("32px")
  spacing2xl                   String   @default("48px")
  borderRadiusSm               String   @default("4px")
  borderRadiusMd               String   @default("8px")
  borderRadiusLg               String   @default("12px")
  borderRadiusXl               String   @default("16px")
  borderRadiusFull             String   @default("9999px")
  shadowSm                     String   @default("0 1px 2px 0 rgb(0 0 0 / 0.05)")
  shadowMd                     String   @default("0 4px 6px -1px rgb(0 0 0 / 0.1)")
  shadowLg                     String   @default("0 10px 15px -3px rgb(0 0 0 / 0.1)")
  shadowXl                     String   @default("0 20px 25px -5px rgb(0 0 0 / 0.1)")
  animationFast                String   @default("150ms")
  animationNormal              String   @default("300ms")
  animationSlow                String   @default("500ms")
  breakpointSm                 String   @default("640px")
  breakpointMd                 String   @default("768px")
  breakpointLg                 String   @default("1024px")
  breakpointXl                 String   @default("1280px")
  breakpoint2xl                String   @default("1536px")
  themeMode                    String   @default("light")
  customVariables              String?
  isActive                     Boolean  @default(true)
  createdAt                    DateTime @default(now())
  updatedAt                    DateTime @updatedAt

  @@map("design_system")
}

model MediaLibrary {
  id           Int          @id @default(autoincrement())
  filename     String
  title        String?
  description  String?
  alt          String?
  fileType     String
  mimeType     String
  fileSize     Int
  width        Int?
  height       Int?
  duration     Float?
  originalUrl  String
  localPath    String?
  publicUrl    String
  thumbnailUrl String?
  folderId     Int?
  tags         String?
  uploadSource String       @default("upload")
  uploadedBy   String?
  isActive     Boolean      @default(true)
  isPublic     Boolean      @default(true)
  createdAt    DateTime     @default(now())
  updatedAt    DateTime     @updatedAt
  folder       MediaFolder? @relation(fields: [folderId], references: [id])
  usages       MediaUsage[]

  @@map("media_library")
}

model MediaFolder {
  id          Int            @id @default(autoincrement())
  name        String
  description String?
  parentId    Int?
  color       String         @default("#5243E9")
  sortOrder   Int            @default(0)
  isActive    Boolean        @default(true)
  createdAt   DateTime       @default(now())
  updatedAt   DateTime       @updatedAt
  parent      MediaFolder?   @relation("FolderHierarchy", fields: [parentId], references: [id])
  children    MediaFolder[]  @relation("FolderHierarchy")
  media       MediaLibrary[]

  @@map("media_folders")
}

model MediaUsage {
  id         Int          @id @default(autoincrement())
  mediaId    Int
  entityType String
  entityId   Int
  fieldName  String
  createdAt  DateTime     @default(now())
  media      MediaLibrary @relation(fields: [mediaId], references: [id], onDelete: Cascade)

  @@unique([mediaId, entityType, entityId, fieldName])
  @@map("media_usage")
}

model Tenant {
  id          Int       @id @default(autoincrement())
  name        String
  slug        String    @unique
  isActive    Boolean   @default(true)
  createdAt   DateTime  @default(now())
  updatedAt   DateTime  @updatedAt
  users       AdminUser[]
  roles       Role[]
  permissions Permission[]
  projects    Project[]
  clients     Client[]
  consultants Consultant[]
  staff       CompanyStaff[]
  labours     Labour[]
  auditLogs   AuditLog[]

  @@index([slug])
  @@map("tenants")
}

model AdminUser {
  id                  Int       @id @default(autoincrement())
  tenantId            Int       @default(1) // Default tenant for migration
  username            String
  email               String
  passwordHash        String
  name                String?
  role                String    @default("admin") // Legacy field, keep for backward compatibility
  isActive            Boolean   @default(true)
  hasAllProjectsAccess Boolean  @default(false) // If true, user can access all projects regardless of memberships
  lastLoginAt         DateTime?
  createdAt           DateTime  @default(now())
  updatedAt           DateTime  @updatedAt
  tenant              Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  userRoles           UserRole[]
  projectMemberships  ProjectMembership[]

  @@unique([tenantId, username])
  @@unique([tenantId, email])
  @@index([tenantId])
  @@map("admin_users")
}

model Permission {
  id          Int      @id @default(autoincrement())
  tenantId    Int      @default(1) // Permissions are tenant-scoped but can share keys
  key         String   // e.g., "project.view_basic", "staff.assign_to_project"
  resource    String   // e.g., "project", "staff", "labour", "admin"
  description String?
  isSystem    Boolean  @default(false) // System permissions cannot be deleted
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  tenant      Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  rolePermissions RolePermission[]

  @@unique([tenantId, key])
  @@index([tenantId])
  @@index([resource])
  @@map("permissions")
}

model Role {
  id          Int      @id @default(autoincrement())
  tenantId    Int
  name        String
  description String?
  isSystem    Boolean  @default(false) // System roles cannot be deleted
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  tenant      Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  rolePermissions RolePermission[]
  userRoles   UserRole[]

  @@unique([tenantId, name])
  @@index([tenantId])
  @@map("roles")
}

model RolePermission {
  id           Int        @id @default(autoincrement())
  roleId       Int
  permissionId Int
  action       String     @default("allow") // "allow" or "deny" - deny wins
  createdAt    DateTime   @default(now())
  role         Role       @relation(fields: [roleId], references: [id], onDelete: Cascade)
  permission   Permission @relation(fields: [permissionId], references: [id], onDelete: Cascade)

  @@unique([roleId, permissionId])
  @@index([roleId])
  @@index([permissionId])
  @@map("role_permissions")
}

model UserRole {
  id        Int      @id @default(autoincrement())
  userId    Int
  roleId    Int
  createdAt DateTime @default(now())
  user      AdminUser @relation(fields: [userId], references: [id], onDelete: Cascade)
  role      Role     @relation(fields: [roleId], references: [id], onDelete: Cascade)

  @@unique([userId, roleId])
  @@index([userId])
  @@index([roleId])
  @@map("user_roles")
}

model ProjectMembership {
  id        Int      @id @default(autoincrement())
  userId    Int
  projectId Int
  createdAt DateTime @default(now())
  user      AdminUser @relation(fields: [userId], references: [id], onDelete: Cascade)
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@unique([userId, projectId])
  @@index([userId])
  @@index([projectId])
  @@map("project_memberships")
}

model AuditLog {
  id          Int      @id @default(autoincrement())
  tenantId    Int
  userId      Int?
  action      String   // e.g., "staff.move", "project.create", "permission.denied"
  resource    String   // e.g., "staff", "project"
  resourceId  Int?
  details     Json?    // Additional context
  ipAddress   String?
  userAgent   String?
  createdAt   DateTime @default(now())
  tenant      Tenant   @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@index([tenantId])
  @@index([userId])
  @@index([action])
  @@index([resource, resourceId])
  @@index([createdAt])
  @@map("audit_logs")
}

model Client {
  id            Int       @id @default(autoincrement())
  tenantId      Int       @default(1)
  name          String
  officeAddress String?
  phone         String?
  email         String?
  isActive      Boolean   @default(true)
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  tenant        Tenant    @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  projects      Project[]

  @@index([tenantId])
  @@map("clients")
}

model Consultant {
  id                         Int                          @id @default(autoincrement())
  tenantId                   Int                          @default(1)
  name                       String
  officeAddress              String?
  phone                      String?
  email                      String?
  isActive                   Boolean                      @default(true)
  createdAt                  DateTime                     @default(now())
  updatedAt                  DateTime                     @updatedAt
  tenant                     Tenant                        @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  ConsultantToConsultantType ConsultantToConsultantType[]
  projectsAsCost             Project[]                    @relation("CostConsultant")
  projectsAsSupervision      Project[]                    @relation("SupervisionConsultant")
  projectsAsDesign           Project[]                    @relation("DesignConsultant")
  projectsAsPMC              Project[]                    @relation("ProjectManagementConsultant")

  @@index([tenantId])
  @@map("consultants")
}

model ConsultantType {
  id                         Int                          @id @default(autoincrement())
  type                       String                       @unique
  description                String?
  createdAt                  DateTime                     @default(now())
  updatedAt                  DateTime                     @updatedAt
  ConsultantToConsultantType ConsultantToConsultantType[]

  @@map("consultant_types")
}

model CompanyStaff {
  id                 Int                    @id @default(autoincrement())
  tenantId           Int                    @default(1)
  staffName          String
  email              String?
  phone              String?
  position           String?
  isActive           Boolean                @default(true)
  createdAt          DateTime               @default(now())
  updatedAt          DateTime               @updatedAt
  employeeNumber     String?
  vacationStartDate  DateTime?
  vacationEndDate    DateTime?
  tenant             Tenant                 @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  projectStaff       ProjectStaff[]
  projectsAsManager  Project[]              @relation("ProjectManager")
  projectsAsDirector Project[]              @relation("ProjectDirector")
  movementHistory    StaffMovementHistory[]
  leaveHistory       LeaveHistory[]         @relation("StaffLeaveHistory")

  @@index([tenantId])
  @@map("company_staff")
}

model Contact {
  id              Int              @id @default(autoincrement())
  firstName       String
  lastName        String
  email           String?
  phone           String?
  position        String?
  notes           String?
  isActive        Boolean          @default(true)
  entityType      String
  entityId        Int
  createdAt       DateTime         @default(now())
  updatedAt       DateTime         @updatedAt
  projectContacts ProjectContact[]

  @@map("contacts")
}

model ProjectContact {
  id             Int      @id @default(autoincrement())
  projectId      Int
  contactId      Int
  isPrimary      Boolean  @default(false)
  consultantType String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  contact        Contact  @relation(fields: [contactId], references: [id], onDelete: Cascade)
  project        Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@unique([projectId, contactId, consultantType])
  @@map("project_contacts")
}

model Project {
  id                            Int                    @id @default(autoincrement())
  tenantId                      Int                    @default(1)
  projectCode                   String
  projectName                   String
  projectDescription            String?
  clientId                      Int?
  projectManagementConsultantId Int?
  designConsultantId            Int?
  supervisionConsultantId       Int?
  costConsultantId              Int?
  projectDirectorId             Int?
  projectManagerId              Int?
  startDate                     DateTime?
  endDate                       DateTime?
  duration                      String?
  eot                           String?
  projectValue                  Decimal?
  lastUpdate                    DateTime               @default(now()) @updatedAt
  createdAt                     DateTime               @default(now())
  updatedAt                     DateTime               @updatedAt
  tenant                        Tenant                 @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  projectChecklistItems         ProjectChecklistItem[]
  projectContacts               ProjectContact[]
  projectPositions              ProjectPosition[]
  projectStaff                  ProjectStaff[]
  projectTrades                 ProjectTrade[]
  projectLabours                ProjectLabour[]
  projectLabourSupplies         ProjectLabourSupply[]
  projectMemberships            ProjectMembership[]
  projectManager                CompanyStaff?          @relation("ProjectManager", fields: [projectManagerId], references: [id])
  projectDirector               CompanyStaff?          @relation("ProjectDirector", fields: [projectDirectorId], references: [id])
  costConsultant                Consultant?            @relation("CostConsultant", fields: [costConsultantId], references: [id])
  supervisionConsultant         Consultant?            @relation("SupervisionConsultant", fields: [supervisionConsultantId], references: [id])
  designConsultant              Consultant?            @relation("DesignConsultant", fields: [designConsultantId], references: [id])
  projectManagementConsultant   Consultant?            @relation("ProjectManagementConsultant", fields: [projectManagementConsultantId], references: [id])
  client                        Client?                @relation(fields: [clientId], references: [id])

  @@unique([tenantId, projectCode])
  @@index([tenantId])
  @@map("projects")
}

model ProjectChecklistItem {
  id           Int       @id @default(autoincrement())
  projectId    Int
  itemNumber   String
  phase        String
  plannedDate  DateTime?
  actualDate   DateTime?
  status       String?
  notes        String?
  isSubItem    Boolean   @default(false)
  parentItemId Int?
  order        Int       @default(0)
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  project      Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@map("project_checklist_items")
}

model ProjectPosition {
  id                  Int            @id @default(autoincrement())
  projectId           Int
  designation         String
  requiredUtilization Int            @default(100)
  createdAt           DateTime       @default(now())
  updatedAt           DateTime       @updatedAt
  project             Project        @relation(fields: [projectId], references: [id], onDelete: Cascade)
  staffAssignments    ProjectStaff[]

  @@unique([projectId, designation])
  @@map("project_positions")
}

model ProjectStaff {
  id              Int                    @id @default(autoincrement())
  projectId       Int
  positionId      Int
  staffId         Int?
  utilization     Int                    @default(100)
  startDate       DateTime?
  endDate         DateTime?
  status          String                 @default("Active")
  notes           String?
  createdAt       DateTime               @default(now())
  updatedAt       DateTime               @updatedAt
  staff           CompanyStaff?          @relation(fields: [staffId], references: [id], onDelete: Cascade)
  position        ProjectPosition        @relation(fields: [positionId], references: [id], onDelete: Cascade)
  project         Project                @relation(fields: [projectId], references: [id], onDelete: Cascade)
  movementHistory StaffMovementHistory[] @relation("ProjectStaffHistory")

  @@unique([projectId, staffId])
  @@map("project_staff")
}

model StaffMovementHistory {
  id               Int           @id @default(autoincrement())
  staffId          Int
  type             String        @default("movement") // "assignment" or "movement"
  fromProjectId    Int?
  fromProjectName  String?
  fromPositionId   Int?
  fromPositionName String?
  toProjectId      Int
  toProjectName    String
  toPositionId     Int
  toPositionName   String
  movedBy          String?
  movementDate     DateTime      @default(now())
  notes            String?
  createdAt        DateTime      @default(now())
  projectStaffId   Int?
  staff            CompanyStaff  @relation(fields: [staffId], references: [id], onDelete: Cascade)
  projectStaff     ProjectStaff? @relation("ProjectStaffHistory", fields: [projectStaffId], references: [id], onDelete: SetNull)

  @@index([staffId])
  @@index([toProjectId])
  @@map("staff_movement_history")
}

model ChecklistTemplate {
  id          Int      @id @default(autoincrement())
  name        String   @default("Default Template")
  description String?
  items       Json
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("checklist_templates")
}

model Position {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  monthlyRate Float?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("positions")
}

model Trade {
  id          Int      @id @default(autoincrement())
  name        String   @unique
  description String?
  monthlyRate Float?
  isActive    Boolean  @default(true)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("trades")
}

model Labour {
  id                Int                     @id @default(autoincrement())
  tenantId          Int                     @default(1)
  labourName        String
  employeeNumber    String?
  phone             String?
  trade             String?
  isActive          Boolean                 @default(true)
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
  vacationStartDate DateTime?
  vacationEndDate   DateTime?
  tenant            Tenant                  @relation(fields: [tenantId], references: [id], onDelete: Cascade)
  projectLabours    ProjectLabour[]
  movementHistory   LabourMovementHistory[] @relation("LabourHistory")
  leaveHistory      LeaveHistory[]          @relation("LabourLeaveHistory")

  @@index([tenantId])
  @@map("labours")
}

model ProjectTrade {
  id                Int             @id @default(autoincrement())
  projectId         Int
  trade             String
  requiredQuantity  Int             @default(1)
  createdAt         DateTime        @default(now())
  updatedAt         DateTime        @updatedAt
  project           Project         @relation(fields: [projectId], references: [id], onDelete: Cascade)
  labourAssignments ProjectLabour[]

  @@unique([projectId, trade])
  @@map("project_trades")
}

model ProjectLabour {
  id              Int                     @id @default(autoincrement())
  projectId       Int
  tradeId         Int
  labourId        Int?
  utilization     Int                     @default(100)
  startDate       DateTime?
  endDate         DateTime?
  status          String                  @default("Active")
  notes           String?
  createdAt       DateTime                @default(now())
  updatedAt       DateTime                @updatedAt
  labour          Labour?                 @relation(fields: [labourId], references: [id], onDelete: Cascade)
  trade           ProjectTrade            @relation(fields: [tradeId], references: [id], onDelete: Cascade)
  project         Project                 @relation(fields: [projectId], references: [id], onDelete: Cascade)
  movementHistory LabourMovementHistory[] @relation("ProjectLabourHistory")

  @@unique([projectId, labourId])
  @@map("project_labours")
}

model LabourMovementHistory {
  id              Int            @id @default(autoincrement())
  labourId        Int
  type            String         @default("movement") // "assignment" or "movement"
  fromProjectId   Int?
  fromProjectName String?
  fromTradeId     Int?
  fromTradeName   String?
  toProjectId     Int
  toProjectName   String
  toTradeId       Int
  toTradeName     String
  movedBy         String? // Could be admin user ID or name
  movementDate    DateTime       @default(now())
  notes           String?
  createdAt       DateTime       @default(now())
  projectLabourId Int? // Reference to the ProjectLabour assignment
  labour          Labour         @relation("LabourHistory", fields: [labourId], references: [id], onDelete: Cascade)
  projectLabour   ProjectLabour? @relation("ProjectLabourHistory", fields: [projectLabourId], references: [id], onDelete: SetNull)

  @@index([labourId])
  @@index([toProjectId])
  @@map("labour_movement_history")
}

model LeaveHistory {
  id             Int           @id @default(autoincrement())
  entityType     String // "staff" or "labour"
  staffId        Int? // Reference to CompanyStaff if entityType is "staff"
  labourId       Int? // Reference to Labour if entityType is "labour"
  leaveStartDate DateTime
  leaveEndDate   DateTime
  returnDate     DateTime? // Optional return date if marked as returned
  isReturned     Boolean       @default(false)
  notes          String?
  createdBy      String? // Admin user who created the record
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  staff          CompanyStaff? @relation("StaffLeaveHistory", fields: [staffId], references: [id], onDelete: Cascade)
  labour         Labour?       @relation("LabourLeaveHistory", fields: [labourId], references: [id], onDelete: Cascade)

  @@index([staffId])
  @@index([labourId])
  @@index([entityType])
  @@index([leaveStartDate])
  @@index([leaveEndDate])
  @@map("leave_history")
}

model ProjectLabourSupply {
  id             Int      @id @default(autoincrement())
  projectId      Int
  trade          String
  numberOfLabour Int
  pricePerHour   Decimal
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  project        Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)

  @@unique([projectId, trade])
  @@index([projectId])
  @@map("project_labour_supplies")
}

model ConsultantToConsultantType {
  A                Int
  B                Int
  consultant_types ConsultantType @relation(fields: [B], references: [id], onDelete: Cascade)
  consultants      Consultant     @relation(fields: [A], references: [id], onDelete: Cascade)

  @@unique([A, B], map: "_ConsultantToConsultantType_AB_unique")
  @@index([B], map: "_ConsultantToConsultantType_B_index")
  @@map("_ConsultantToConsultantType")
}
