{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/azarmacbook/Cursor%20Projects/PMP-%20Reports/src/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined;\n};\n\nexport const prisma = globalForPrisma.prisma ?? new PrismaClient();\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma; "],"names":[],"mappings":";;;AAAA;;AAEA,MAAM,kBAAkB;AAIjB,MAAM,SAAS,gBAAgB,MAAM,IAAI,IAAI,6HAAA,CAAA,eAAY;AAEhE,wCAA2C,gBAAgB,MAAM,GAAG","debugId":null}},
    {"offset": {"line": 86, "column": 0}, "map": {"version":3,"sources":["file:///Users/azarmacbook/Cursor%20Projects/PMP-%20Reports/src/app/api/admin/projects/%5Bid%5D/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\nimport { z } from 'zod';\nimport { prisma } from '@/lib/db';\n\nconst projectSchema = z.object({\n  projectCode: z.string().min(1, 'Project code is required'),\n  projectName: z.string().min(1, 'Project name is required'),\n  projectDescription: z.string().optional(),\n  clientId: z.number().optional(),\n  projectManagementConsultantId: z.number().optional(),\n  designConsultantId: z.number().optional(),\n  supervisionConsultantId: z.number().optional(),\n  costConsultantId: z.number().optional(),\n  projectDirectorId: z.number().optional(),\n  projectManagerId: z.number().optional(),\n  startDate: z.string().optional(),\n  endDate: z.string().optional(),\n  duration: z.string().optional(),\n  eot: z.string().optional(),\n});\n\n// GET - Fetch single project\nexport async function GET(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const projectId = parseInt(params.id);\n    \n    if (isNaN(projectId)) {\n      return NextResponse.json(\n        { success: false, error: 'Invalid project ID' },\n        { status: 400 }\n      );\n    }\n\n    const project = await prisma.project.findUnique({\n      where: { id: projectId },\n      include: {\n        client: true,\n        projectManagementConsultant: true,\n        designConsultant: true,\n        supervisionConsultant: true,\n        costConsultant: true,\n        projectDirector: true,\n        projectManager: true,\n      },\n    });\n\n    if (!project) {\n      return NextResponse.json(\n        { success: false, error: 'Project not found' },\n        { status: 404 }\n      );\n    }\n\n    return NextResponse.json({ success: true, data: project });\n  } catch (error) {\n    console.error('Error fetching project:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to fetch project' },\n      { status: 500 }\n    );\n  }\n}\n\n// PUT - Update project\nexport async function PUT(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const projectId = parseInt(params.id);\n    \n    if (isNaN(projectId)) {\n      return NextResponse.json(\n        { success: false, error: 'Invalid project ID' },\n        { status: 400 }\n      );\n    }\n\n    const body = await request.json();\n    const validatedData = projectSchema.parse(body);\n\n    // Convert date strings to DateTime objects if provided\n    const projectData = {\n      ...validatedData,\n      startDate: validatedData.startDate ? new Date(validatedData.startDate) : null,\n      endDate: validatedData.endDate ? new Date(validatedData.endDate) : null,\n    };\n\n    const project = await prisma.project.update({\n      where: { id: projectId },\n      data: projectData,\n      include: {\n        client: true,\n        projectManagementConsultant: true,\n        designConsultant: true,\n        supervisionConsultant: true,\n        costConsultant: true,\n        projectDirector: true,\n        projectManager: true,\n      },\n    });\n\n    return NextResponse.json({ success: true, data: project });\n  } catch (error) {\n    console.error('Error updating project:', error);\n    if (error instanceof z.ZodError) {\n      return NextResponse.json(\n        { success: false, error: 'Validation error', details: error.errors },\n        { status: 400 }\n      );\n    }\n    return NextResponse.json(\n      { success: false, error: 'Failed to update project' },\n      { status: 500 }\n    );\n  }\n}\n\n// DELETE - Delete project\nexport async function DELETE(\n  request: NextRequest,\n  { params }: { params: { id: string } }\n) {\n  try {\n    const projectId = parseInt(params.id);\n    \n    if (isNaN(projectId)) {\n      return NextResponse.json(\n        { success: false, error: 'Invalid project ID' },\n        { status: 400 }\n      );\n    }\n\n    await prisma.project.delete({\n      where: { id: projectId },\n    });\n\n    return NextResponse.json({ success: true, message: 'Project deleted successfully' });\n  } catch (error) {\n    console.error('Error deleting project:', error);\n    return NextResponse.json(\n      { success: false, error: 'Failed to delete project' },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}